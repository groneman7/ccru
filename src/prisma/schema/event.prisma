// Model for the events hosted by CCRU.
model Event {
  id          String       @id @default(auto()) @map("_id") @db.ObjectId
  date        DateTime
  name        String
  description String?
  location    String?
  time_start  DateTime?
  time_end    DateTime?
  created_at  DateTime     @default(now())
  created_by  String
  shifts      EventShift[]

  @@index([date])
  @@map("EVENTS")
}

model EventShift {
  id         String        @id @default(auto()) @map("_id") @db.ObjectId
  event      Event         @relation(fields: [eventId], references: [id])
  eventId    String        @db.ObjectId
  position   EventPosition @relation(fields: [positionId], references: [id])
  positionId String        @db.ObjectId
  user       String?

  @@map("EVENT_SHIFTS")
}

// Model for the templates of events hosted by CCRU.
model EventTemplate {
  id          String          @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  description String?
  location    String?
  time_start  DateTime?
  time_end    DateTime?
  positions   PositionsForTemplates[]

  @@index([name])
  @@map("EVENT_TEMPLATES")
}

type PositionsForTemplates {
    positionId String
    quantity Int
}

// Model for the positions of event shifts (e.g., triage, interviewer, etc.).
model EventPosition {
  id                 String          @id @default(auto()) @map("_id") @db.ObjectId
  name               String
  label              String?
  description        String?
  allowed_user_types String[]
  officer_only       Boolean?        @default(false)
  EventShift         EventShift[]

  @@map("EVENT_POSITIONS")
}
